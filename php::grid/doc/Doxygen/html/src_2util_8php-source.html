<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>php::Grid: util.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>util.php</h1><a href="src_2util_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 &lt;?<span class="comment"></span>
00002 <span class="comment">/**</span>
00003 <span class="comment"> * General utility functions</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * This file contains convenience functions used throughout the package. </span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> * @package Util</span>
00008 <span class="comment"> * @author José R. Valverde &lt;jrvalverde@es.embnet.org&gt;</span>
00009 <span class="comment"> * @version 1.0</span>
00010 <span class="comment"> * </span>
00011 <span class="comment"> * @copyright José R. Valverde &lt;jrvalverde@acm.org&gt;</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> * This library is free software; you can redistribute it and/or</span>
00014 <span class="comment"> * modify it under the terms of the GNU Lesser General Public</span>
00015 <span class="comment"> * License as published by the Free Software Foundation; either</span>
00016 <span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span>
00017 <span class="comment"> * </span>
00018 <span class="comment"> * This library is distributed in the hope that it will be useful,</span>
00019 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00020 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00021 <span class="comment"> * Lesser General Public License for more details.</span>
00022 <span class="comment"> * </span>
00023 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
00024 <span class="comment"> * License along with this library; if not, write to the Free Software</span>
00025 <span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00026 <span class="comment"> * </span>
00027 <span class="comment"> */</span>
00028 
00029 <span class="comment"></span>
00030 <span class="comment">/**</span>
00031 <span class="comment"> * include global configuration definitions</span>
00032 <span class="comment"> */</span>
00033 require_once(<span class="stringliteral">"./grid_config.php"</span>);
00034 
00035 <span class="comment">// ------------- COMMODITY ROUTINES ----------------</span>
00036 <span class="comment"></span>
00037 <span class="comment">/**</span>
00038 <span class="comment"> * Start the display of a www page</span>
00039 <span class="comment"> *</span>
00040 <span class="comment"> * We have it as a function so we can customise all pages generated as</span>
00041 <span class="comment"> * needed. This routine will open HTML, create the page header, and </span>
00042 <span class="comment"> * include any needed style sheets (if any) to provide a common </span>
00043 <span class="comment"> * look-and-feel for all pages generated.</span>
00044 <span class="comment"> */</span>
<a name="l00045"></a><a class="code" href="src_2util_8php.html#a0">00045</a> function <a class="code" href="src_2util_8php.html#a0">set_header</a>()
00046 {
00047     global $app_name, $app_dir;
00048     <span class="comment">// Start HTML vx.xx output</span>
00049     echo <span class="stringliteral">"&lt;html&gt;"</span>;
00050     <span class="comment">// Print headers</span>
00051     echo <span class="stringliteral">"&lt;head&gt;"</span>;
00052     echo <span class="stringliteral">"&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\"&gt;"</span>;
00053     echo <span class="stringliteral">"&lt;meta name=\"DESCRIPTION\" content=\"a web interface to run TINKER molecular modelling on the EGEE grid\"&gt;"</span>;
00054     echo <span class="stringliteral">"&lt;meta name=\"AUTHOR\" content=\"EMBnet/CNB\"&gt;"</span>;
00055     echo <span class="stringliteral">"&lt;meta name=\"COPYRIGHT\" content=\"(c) 2004-5 by CSIC - Open Source Software\"&gt;"</span>;
00056     echo <span class="stringliteral">"&lt;meta name=\"GENERATOR\" content=\"$app_name\"&gt;"</span>;
00057     echo <span class="stringliteral">"&lt;link rel=\"StyleSheet\" href=\"$app_dir/style/style.css\" type=\"text/css\"/&gt;"</span>;
00058     echo <span class="stringliteral">"&lt;link rel=\"shortcut icon\" href=\"$app_dir/images/favicon.ico\"/&gt;"</span>;
00059     echo <span class="stringliteral">"&lt;title=\"$app_name\"&gt;"</span>;
00060     echo <span class="stringliteral">"&lt;/head&gt;"</span>;
00061     <span class="comment">// Prepare body</span>
00062     echo <span class="stringliteral">"&lt;body bgcolor=\"white\" background=\"$app_dir/images/6h2o-w-small.gif\" link=\"ffc600\" VLINK=\"#cc9900\" ALINK=\"#4682b4\"&gt;"</span>;
00063 }
00064 <span class="comment"></span>
00065 <span class="comment">/**</span>
00066 <span class="comment"> * close a web page</span>
00067 <span class="comment"> *</span>
00068 <span class="comment"> * Make sure we end the page with all the appropriate formulisms:</span>
00069 <span class="comment"> * close the body, include copyright notice, state creator and</span>
00070 <span class="comment"> * any needed details, and close the page.</span>
00071 <span class="comment"> */</span>
<a name="l00072"></a><a class="code" href="src_2util_8php.html#a1">00072</a> function <a class="code" href="src_2util_8php.html#a1">set_footer</a>()
00073 {
00074         global $maintainer, $app_dir;
00075         <span class="comment">// close body</span>
00076         echo <span class="stringliteral">"&lt;/body&gt;&lt;hr&gt;"</span>;
00077         <span class="comment">// footer</span>
00078         echo <span class="stringliteral">"&lt;center&gt;&lt;table border=\"0\" width=\"90%\"&gt;&lt;tr&gt;"</span>;
00079             <span class="comment">// Copyright and author</span>
00080             echo <span class="stringliteral">"&lt;td&gt;&lt;A HREF=\"$app_dir/c/copyright.html\"&gt;&amp;copy;&lt;/a&gt;EMBnet/CNB&lt;/td&gt;"</span>;
00081             <span class="comment">// contact info</span>
00082             echo <span class="stringliteral">"&lt;td align=\"RIGHT\"&gt;&lt;A HREF=\"emailto:$maintainer\"&gt;$maintainer&lt;/a&gt;&lt;/td&gt;"</span>;
00083         echo <span class="stringliteral">"&lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;"</span>;
00084         <span class="comment">// Page</span>
00085         echo <span class="stringliteral">"&lt;/html&gt;"</span>;
00086 }
00087 <span class="comment"></span>
00088 <span class="comment">/**</span>
00089 <span class="comment"> * print a warning</span>
00090 <span class="comment"> *</span>
00091 <span class="comment"> * Prints a warning in a separate pop-up window.</span>
00092 <span class="comment"> * A warning is issued when a non-critical problem has been detected.</span>
00093 <span class="comment"> * Execution can be resumed using some defaults, but the user should</span>
00094 <span class="comment"> * be notified. In order to not disrupt the web page we are displaying</span>
00095 <span class="comment"> * we use a JavaScript pop-up alert to notify the user.</span>
00096 <span class="comment"> *</span>
00097 <span class="comment"> * @param msg the warning message to send the user</span>
00098 <span class="comment"> */</span>
<a name="l00099"></a><a class="code" href="src_2util_8php.html#a2">00099</a> function <a class="code" href="test_2util_8php.html#a2">warning</a>($msg)
00100 {
00101     echo <span class="stringliteral">"&lt;script language=\"JavaScript\"&gt;"</span>;
00102     echo <span class="stringliteral">"alert(\"WARNING:\n $msg\");"</span>;
00103     echo <span class="stringliteral">"&lt;/script&gt;"</span>;
00104 }
00105 <span class="comment"></span>
00106 <span class="comment">/**</span>
00107 <span class="comment"> * print an error message and exit</span>
00108 <span class="comment"> *</span>
00109 <span class="comment"> * Whenever we detect something wrong, we must tell the user. This function</span>
00110 <span class="comment"> * will take an error message as its argument, format it suitably and</span>
00111 <span class="comment"> * spit it out.</span>
00112 <span class="comment"> *</span>
00113 <span class="comment"> * @note This might look nicer using javascript to pop up a nice window with</span>
00114 <span class="comment"> * the error message. Style sheets would be nice too.</span>
00115 <span class="comment"> *</span>
00116 <span class="comment"> * @param where the name of the caller routine or the process where the</span>
00117 <span class="comment"> *              error occurred</span>
00118 <span class="comment"> * @param what  a description of the abnormal condition that triggered</span>
00119 <span class="comment"> *              the error</span>
00120 <span class="comment"> */</span>
00121 
<a name="l00122"></a><a class="code" href="src_2util_8php.html#a3">00122</a> function <a class="code" href="test_2util_8php.html#a3">error</a>($where, $what)
00123 {
00124         <span class="comment">// format the message</span>
00125         echo <span class="stringliteral">"&lt;p&gt;&lt;/p&gt;&lt;center&gt;&lt;table border=\"2\"&gt;\n"</span>;
00126         echo <span class="stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;center&gt;&lt;font color=\"red\"&gt;&lt;strong&gt;\n"</span>;
00127 
00128         <span class="comment">// output the message</span>
00129         echo <span class="stringliteral">"ERROR - HORROR\n"</span>;
00130 
00131         <span class="comment">// close format</span>
00132         echo <span class="stringliteral">"&lt;/strong&gt;&lt;/font&gt;&lt;/center&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
00133         echo <span class="stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;center&gt;&lt;b&gt;$where&lt;/b&gt;&lt;/center&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
00134         echo <span class="stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;center&gt;$what&lt;/center&gt;&lt;/td&gt;&lt;/tr&gt;\n"</span>;
00135         echo <span class="stringliteral">"&lt;/table&gt;&lt;/center&gt;&lt;p&gt;&lt;/p&gt;\n"</span>;
00136 }
00137 <span class="comment"></span>
00138 <span class="comment">/**</span>
00139 <span class="comment"> * print a letal error message and die</span>
00140 <span class="comment"> *</span>
00141 <span class="comment"> * This function is called whenever a letal error (one that prevents</span>
00142 <span class="comment"> * further processing) is detected. The function will spit out an</span>
00143 <span class="comment"> * error message, close the page and exit the program.</span>
00144 <span class="comment"> * It should seldomly be used, since it may potentially disrupt the</span>
00145 <span class="comment"> * page layout (e.g. amid a table) by not closing open tags of which</span>
00146 <span class="comment"> * it is unaware.</span>
00147 <span class="comment"> * Actually it is a wrapper for error + terminate.</span>
00148 <span class="comment"> *</span>
00149 <span class="comment"> * @param where location (physical or logical) where the error was</span>
00150 <span class="comment"> * detected: a physical location (routine name/line number) may be</span>
00151 <span class="comment"> * helpful for debugging, a logical location (during which part of</span>
00152 <span class="comment"> * the processing it happened) will be more helful to the user.</span>
00153 <span class="comment"> *</span>
00154 <span class="comment"> * @param what a descrition of the abnormality detected.</span>
00155 <span class="comment"> */</span>
<a name="l00156"></a><a class="code" href="src_2util_8php.html#a4">00156</a> function <a class="code" href="test_2util_8php.html#a4">letal</a>($what, $where)
00157 {
00158         <a class="code" href="test_2util_8php.html#a3">error</a>($what, $where);
00159         <a class="code" href="src_2util_8php.html#a1">set_footer</a>();
00160         exit();
00161 }
00162 
00163 <span class="comment">// ------------- SSH ROUTINES ----------------</span>
00164 <span class="comment"></span>
00165 <span class="comment">/**</span>
00166 <span class="comment"> *  Execute a single command remotely using ssh and </span>
00167 <span class="comment"> * return its entire output (like passthru)</span>
00168 <span class="comment"> *</span>
00169 <span class="comment"> *  This might be done as well using a pipe on /tmp and</span>
00170 <span class="comment"> * making the command 'cat' the pipe: when ssh runs, it</span>
00171 <span class="comment"> * runs the command 'cat' on the pipe and hangs on read.</span>
00172 <span class="comment"> *  Then we just need a thread to open the pipe, put the</span>
00173 <span class="comment"> * password and close the pipe.</span>
00174 <span class="comment"> *  This other way the password is never wirtten down.</span>
00175 <span class="comment"> * But, OTOH, the file life is so ephemeral that most</span>
00176 <span class="comment"> * of the time it will only exist in the internal system</span>
00177 <span class="comment"> * cache, so this approach is not that bad either.</span>
00178 <span class="comment"> *</span>
00179 <span class="comment"> *  @param remote   The remote end to run the command, in</span>
00180 <span class="comment"> *                  the form 'user@host' (or 'host' if the</span>
00181 <span class="comment"> *                  username is the same).</span>
00182 <span class="comment"> *  @param password The remote password. Note that if direct</span>
00183 <span class="comment"> *                  RSA/DSA/.shosts/.rhosts login is enabled</span>
00184 <span class="comment"> *                  then the password should be ignored as</span>
00185 <span class="comment"> *                  SSH should not run the ASKPASS command).</span>
00186 <span class="comment"> *  @param command  The command to execute on the remote end</span>
00187 <span class="comment"> *                  NOTE: if you want to use redirection, the</span>
00188 <span class="comment"> *                  entire remote command line should be </span>
00189 <span class="comment"> *                  enclosed in additional quotes!</span>
00190 <span class="comment"> *  @param status   Optional, this will hold the termination</span>
00191 <span class="comment"> *                  status of SSH after invocation, which</span>
00192 <span class="comment"> *                  should be the exit status of the remote</span>
00193 <span class="comment"> *                  command or 255 if an error occurred</span>
00194 <span class="comment"> *  @return output  The output of the remote command.</span>
00195 <span class="comment"> */</span>
<a name="l00196"></a><a class="code" href="src_2util_8php.html#a5">00196</a> function <a class="code" href="test_2util_8php.html#a5">ssh_passthru</a>($remote, $password, $command, $status)
00197 {
00198         umask(0077);
00199         $tmpfname = tempnam(<span class="stringliteral">"/tmp"</span>, <span class="stringliteral">"egTinker"</span>);
00200         chmod($tmpfname, 0700);
00201         $fp = fopen($tmpfname, <span class="stringliteral">"w"</span>);
00202         fputs($fp, <span class="stringliteral">"#!/bin/sh\necho $password\n"</span>);
00203         fputs($fp, <span class="stringliteral">"rm -f $tmpfname\n"</span>);
00204         fclose($fp);
00205         putenv(<span class="stringliteral">"DISPLAY=none:0."</span>);
00206         putenv(<span class="stringliteral">"SSH_ASKPASS=$tmpfname"</span>);
00207         <span class="keywordflow">return</span> passthru(<span class="stringliteral">"ssh -x -t -t $remote $command"</span>, $status);
00208 }
00209 
00210 <span class="comment">// Do a remote scp connection with local password</span><span class="comment"></span>
00211 <span class="comment">/**</span>
00212 <span class="comment"> *  Copy a file or directory from one source to a destination</span>
00213 <span class="comment"> *</span>
00214 <span class="comment"> *  This function copies source to dest, where one of them is a</span>
00215 <span class="comment"> * local filespec and the other a remote filespec of the form</span>
00216 <span class="comment"> * [user@]host:path</span>
00217 <span class="comment"> *</span>
00218 <span class="comment"> *  If the original source is a directory, it will be copied</span>
00219 <span class="comment"> * recursively to destination (hence easing file transfers).</span>
00220 <span class="comment"> *</span>
00221 <span class="comment"> *  The function returns TRUE on success or FALSE on failure.</span>
00222 <span class="comment"> *</span>
00223 <span class="comment"> */</span>
<a name="l00224"></a><a class="code" href="src_2util_8php.html#a6">00224</a> function <a class="code" href="test_2util_8php.html#a6">ssh_copy</a>($origin, $destination, $password)
00225 {
00226         umask(0077);
00227         $tmpfname = tempnam(<span class="stringliteral">"/tmp"</span>, <span class="stringliteral">"egTinker"</span>);
00228         chmod($tmpfname, 0700);
00229         $fp = fopen($tmpfname, <span class="stringliteral">"w"</span>);
00230         fputs($fp, <span class="stringliteral">"#!/bin/sh\necho $password\n"</span>);
00231         fputs($fp, <span class="stringliteral">"rm $tmpfname\n"</span>);
00232         fclose($fp);
00233         putenv(<span class="stringliteral">"DISPLAY=none:0."</span>);
00234         putenv(<span class="stringliteral">"SSH_ASKPASS=$tmpfname"</span>);
00235         system(<span class="stringliteral">"scp -pqrC $origin $destination"</span>, $status);
00236         <span class="keywordflow">if</span> ($status == 0)
00237             <span class="keywordflow">return</span> TRUE;
00238         <span class="keywordflow">else</span>
00239             <span class="keywordflow">return</span> FALSE;
00240 }
00241 
<a name="l00242"></a><a class="code" href="src_2util_8php.html#a7">00242</a> function <a class="code" href="test_2util_8php.html#a7">ssh_open</a>($remote, $password)
00243 {       
00244     global <a class="code" href="src_2grid__config_8php.html#a0">$php_version</a>;
00245     global $debug;
00246 
00247     <span class="comment">// Open a child process with the 'proc_open' function. </span>
00248     <span class="comment">//</span>
00249     <span class="comment">// Some tricks: we must open the connection using '-x' to disable</span>
00250     <span class="comment">// X11 forwarding, and use '-t -t' to avoid SSH generating an error</span>
00251     <span class="comment">// because we are not connected to any terminal.</span>
00252     <span class="comment">// NOTE:</span>
00253     <span class="comment">//   We require users to have an account and password on</span>
00254     <span class="comment">//   the UI and provide their user/password through the web or</span>
00255     <span class="comment">//   otherwise (e.g. using myproxy)</span>
00256     <span class="comment">//</span>
00257     <span class="comment">// NOTE: if the web server is trusted remotely (i.e. it's SSH public </span>
00258     <span class="comment">// key is accepted in ~user@host:.ssh/authorized_keys) then any </span>
00259     <span class="comment">// password will do.</span>
00260     <span class="keywordflow">if</span> (<a class="code" href="src_2grid__config_8php.html#a0">$php_version</a> &lt; 5) {
00261         <span class="comment">// Prepare I/O</span>
00262         $descriptorspec = array(
00263             0 =&gt; array(<span class="stringliteral">"pipe"</span>, <span class="stringliteral">"r"</span>),  <span class="comment">// connect child's stdin to the read end of a pipe</span>
00264             1 =&gt; array(<span class="stringliteral">"pipe"</span>, <span class="stringliteral">"w"</span>),  <span class="comment">// connect child's stdout to the write end of a pipe</span>
00265             2 =&gt; array(<span class="stringliteral">"pipe"</span>, <span class="stringliteral">"w"</span>)   <span class="comment">// stderr is a pipe to read from</span>
00266         );
00267         <span class="comment">// prepare password</span>
00268         putenv(<span class="stringliteral">"DISPLAY=none:0."</span>);
00269         putenv(<span class="stringliteral">"SSH_ASKPASS=$tmpfname"</span>);
00270         umask(0077);
00271         $tmpfname = tempnam(<span class="stringliteral">"/tmp"</span>, <span class="stringliteral">"egTinker"</span>);
00272         chmod($tmpfname, 0700);
00273         $fp = fopen($tmpfname, <span class="stringliteral">"w"</span>);
00274         fputs($fp, <span class="stringliteral">"#!/bin/sh\necho $password\n"</span>);
00275         fputs($fp, <span class="stringliteral">"rm $tmpfname\n"</span>);
00276         fclose($fp);
00277 
00278         $process = proc_open(<span class="stringliteral">"ssh -x -t -t $remote"</span>, 
00279                          $descriptorspec,
00280                          $pipes);
00281         <span class="keywordflow">if</span> ($debug) echo <span class="stringliteral">"ssh -x -t -t $remote&lt;br /&gt;\n"</span>;
00282         <span class="comment">// check status</span>
00283         <span class="keywordflow">if</span> (!is_resource($process)) 
00284         {
00285             <a class="code" href="test_2util_8php.html#a4">letal</a>(<span class="stringliteral">"SSH::connect"</span>, <span class="stringliteral">"cannot connect to the remote host"</span>);
00286             <span class="keywordflow">return</span>;
00287         }
00288         <span class="keywordflow">if</span> ($debug) echo <span class="stringliteral">"proc_open&lt;br /&gt;\n"</span>;
00289 
00290     }
00291     <span class="keywordflow">else</span> {      <span class="comment">/* php5 -- we can use PTYs */</span>
00292             <span class="comment">/* XXX -- untested -- probably unneeded */</span>
00293         $descriptorspec = array(
00294             0 =&gt; array(<span class="stringliteral">"pty"</span>),
00295             1 =&gt; array(<span class="stringliteral">"pty"</span>),
00296             2 =&gt; array(<span class="stringliteral">"pty"</span>)
00297         );
00298         <span class="comment">// prepare password</span>
00299         putenv(<span class="stringliteral">"DISPLAY=none:0."</span>);
00300         putenv(<span class="stringliteral">"SSH_ASKPASS=$tmpfname"</span>);
00301         umask(0077);
00302         $tmpfname = tempnam(<span class="stringliteral">"/tmp"</span>, <span class="stringliteral">"egTinker"</span>);
00303         chmod($tmpfname, 0700);
00304         $fp = fopen($tmpfname, <span class="stringliteral">"w"</span>);
00305         fputs($fp, <span class="stringliteral">"#!/bin/sh\necho $password\n"</span>);
00306         fputs($fp, <span class="stringliteral">"rm $tmpfname\n"</span>);
00307         fclose($fp);
00308 
00309         $process = proc_open(<span class="stringliteral">"ssh -x -t -t $remote"</span>, 
00310                          $descriptorspec,
00311                          $pipes);
00312 
00313         <span class="comment">// check status</span>
00314         <span class="keywordflow">if</span> (!is_resource($process)) 
00315         {
00316             <a class="code" href="test_2util_8php.html#a4">letal</a>(<span class="stringliteral">"SSH::connect"</span>, <span class="stringliteral">"cannot connect to the remote host"</span>);
00317             <span class="keywordflow">return</span>;
00318         }
00319 
00320         $status = proc_get_status($process);
00321         <span class="keywordflow">if</span> ($status-&gt;running == FALSE) {
00322             fclose($pipes[0]); fclose($pipes[1]); fclose($pipes[2]);
00323             proc_close($process);
00324             <a class="code" href="test_2util_8php.html#a4">letal</a>(<span class="stringliteral">"SSH::connect"</span>, <span class="stringliteral">"connection exited "</span>.$status-&gt;exitcode);
00325             <span class="keywordflow">return</span>;
00326         }
00327         <span class="keywordflow">if</span> ($status-&gt;signaled) {
00328             fclose($pipes[0]); fclose($pipes[1]); fclose($pipes[2]);
00329             proc_close($process);
00330             <a class="code" href="test_2util_8php.html#a4">letal</a>(<span class="stringliteral">"SSH::connect"</span>, <span class="stringliteral">"connection terminated by "</span>.$status-&gt;termsig);
00331             <span class="keywordflow">return</span>;
00332         }
00333         <span class="keywordflow">if</span> ($status-&gt;stopped) {
00334             <span class="comment">// Tell the user and hope for the best</span>
00335             <a class="code" href="test_2util_8php.html#a2">warning</a>(<span class="stringliteral">"SSH::connect stopped by "</span>.$status-&gt;stopsig.
00336             <span class="stringliteral">" it may still have a chance though"</span>);
00337         }
00338 
00339     }
00340 
00341     <span class="comment">// $pipes now looks like this:</span>
00342     <span class="comment">//   0 =&gt; writeable handle connected to child stdin</span>
00343     <span class="comment">//   1 =&gt; readable handle connected to child stdout</span>
00344 
00345     <span class="comment">// We now have a connection to the remote Grid User Interface</span>
00346     <span class="comment">// Server which we may use to send commands/receive output</span>
00347     <span class="keywordflow">return</span> array('stdin' =&gt; $pipes[0],
00348                  'stdout' =&gt; $pipes[1],
00349                  'stderr' =&gt; $pipes[2] );
00350 }
00351 
00352 ?&gt;
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jun 22 10:01:10 2006 for php::Grid by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
