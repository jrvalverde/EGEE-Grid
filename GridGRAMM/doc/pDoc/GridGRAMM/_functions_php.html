<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>Docs for page functions.php</title>
	<link rel="stylesheet" type="text/css" id="layout" href="../media/layout.css" media="screen">
	<link rel="stylesheet" type="text/css" href="../media/style.css" media="all">
	<link rel="stylesheet" type="text/css" href="../media/print.css" media="print">
</head>

<body>
<div id="header">
	<div id="navLinks">
		[ <a href="../classtrees_GridGRAMM.html">Class Tree: GridGRAMM</a> ]
		[ <a href="../elementindex_GridGRAMM.html">Index: GridGRAMM</a> ]
		[ <a href="../elementindex.html">All elements</a> ]
	</div>
	<div id="packagePosition">
		<div id="packageTitle2">GridGRAMM</div>
		<div id="packageTitle">GridGRAMM</div>
		<div id="elementPath"> &middot; </div>
	</div>
</div>

<div id="nav" class="small">
	<div id="packages">
		Packages:
					<p><a href="../li_GridGRAMM.html">GridGRAMM</a></p>
			</div>

				<div id="index">
			<div id="files">
								Files:<br>
								<a href="../GridGRAMM/_auth_php.html">		auth.php
		</a><br>
			<a href="../GridGRAMM/_functions_php.html">		functions.php
		</a><br>
			<a href="../GridGRAMM/_grid_php.html">		grid.php
		</a><br>
			<a href="../GridGRAMM/_grid_test_php.html">		grid_test.php
		</a><br>
			<a href="../GridGRAMM/_processor_php.html">		processor.php
		</a><br>
			<a href="../GridGRAMM/_results_php.html">		results.php
		</a><br>
			<a href="../GridGRAMM/_ssh_php.html">		ssh.php
		</a><br>
			<a href="../GridGRAMM/_ssh_test_php.html">		ssh_test.php
		</a><br>
			<a href="../GridGRAMM/_variables_php.html">		variables.php
		</a><br>
				</div>
			<div id="classes">
				Classes:<br>
								<a href="../GridGRAMM/Grid.html">		Grid
		</a><br>
			<a href="../GridGRAMM/SExec.html">		SExec
		</a><br>
				</div>
		</div>
	</div>

<div id="body">
			<h1>Procedural File: functions.php</h1>
	<p style="margin: 0px;">Source Location: /functions.php</p>
	
<br>
<br>

<div class="contents">
<h2>Classes:</h2>
<dl>
</dl>
</div>

<h2>Page Details:</h2>
<p align="center"><strong>General utility functions
</strong></p>
<p>This file contains convenience functions used throughout the package.</p><h4>Tags:</h4>
<ul>
	<li><b>copyright</b> - CSIC - GPL</li>
	<li><b>version</b> - 1.0</li>
	<li><b>author</b> - David Garcia Aristegui &lt;<a href="mailto:david@cnb.uam.es">mailto:david@cnb.uam.es</a>&gt;</li>
</ul>
<hr>
Includes:<br>
require(<a href="../GridGRAMM/_variables_php.html">"./variables.php"</a>) <span class="linenumber">[line 16]</span>
<br />
<p align="center"><strong>include global configuration definitions
</strong></p>
<hr>
<div id="global">
</div><hr>
<div id="define">
</div><hr>
<div id="function">
	<a name="functioncheck_status"></a>
	<h3>check_status</h3>
	<div class="indent">
		<code>void check_status(
)</code>
		<p class="linenumber">[line 245]</p>
		<p align="center"><strong>Check job status
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionclose_connection"></a>
	<h3>close_connection</h3>
	<div class="indent">
		<code>void close_connection(
$process $process, $descriptorspec $descriptorspec, $pipes $pipes)</code>
		<p class="linenumber">[line 101]</p>
		<p align="center"><strong>Close the connection with the remote Grid access point (UI node)
</strong></p>
<p>What we are going to do is to close the communication pipes   and kill the child processes that actually handles communication   with the remote Grid UI host (ssh).</p>		
		<h4>Parameters</h4>
		<ul>
					<li>
			<span class="type">$process</span>
			<b>$process</b> 
			- 
			</li>
					<li>
			<span class="type">$descriptorspec</span>
			<b>$descriptorspec</b> 
			- 
			</li>
					<li>
			<span class="type">$pipes</span>
			<b>$pipes</b> 
			- 
			</li>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functioncreate_gr_files"></a>
	<h3>create_gr_files</h3>
	<div class="indent">
		<code>void create_gr_files(
mixed $grid_path, mixed $random_value, mixed $resolution)</code>
		<p class="linenumber">[line 318]</p>
		<p align="center"><strong>Create configuration files needed to run GRAMM
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functioncreate_jdl_file"></a>
	<h3>create_jdl_file</h3>
	<div class="indent">
		<code>void create_jdl_file(
mixed $grid_path, mixed $random_value)</code>
		<p class="linenumber">[line 383]</p>
		<p align="center"><strong>Create JDL description of the job to be submitted to the Grid
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functioncreate_working_directory"></a>
	<h3>create_working_directory</h3>
	<div class="indent">
		<code>void create_working_directory(
mixed $grid_path)</code>
		<p class="linenumber">[line 201]</p>
		<p align="center"><strong>Create working directory
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionenter_grid"></a>
	<h3>enter_grid</h3>
	<div class="indent">
		<code>void enter_grid(
mixed $pipes, mixed $grid_pass)</code>
		<p class="linenumber">[line 185]</p>
		<p align="center"><strong>Start the Grid services
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functioninstall_gramm"></a>
	<h3>install_gramm</h3>
	<div class="indent">
		<code>void install_gramm(
grid_path $grid_path, random_value $random_value)</code>
		<p class="linenumber">[line 144]</p>
		<p align="center"><strong>Install the program and scripts needed to run it on a suitable place
</strong></p>
<p>This function installs the docking program GRAMM and the scripts  needed to run it on a suitable local directory.</p><p>Since we may potentially be called many times in a short period  we need a way to make sure their jobs don't clash with one another,  most specially, that they don't overwrite each others' workspace.</p><p>For this reason, we use a separate working directory for each  request. This function will install GRAMM on the specified working  directory.</p>		
		<h4>Parameters</h4>
		<ul>
					<li>
			<span class="type">grid_path</span>
			<b>$grid_path</b> 
			- 
			local directory devoted to Grid work</li>
					<li>
			<span class="type">random_value</span>
			<b>$random_value</b> 
			- 
			a random value to generate a unique                 name for the working directory.</li>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionjob_identifier"></a>
	<h3>job_identifier</h3>
	<div class="indent">
		<code>void job_identifier(
)</code>
		<p class="linenumber">[line 230]</p>
		<p align="center"><strong>Get job identifier
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionopen_connection"></a>
	<h3>open_connection</h3>
	<div class="indent">
		<code>void open_connection(
server $server, grid_path $grid_path, process $process, descriptorspec $descriptorspec, pipes $pipes)</code>
		<p class="linenumber">[line 53]</p>
		<p align="center"><strong>open a connection to the Grid UI server
</strong></p>
<p>The Grid User Interface server is the entry point to the Grid   for users and user applications. This is where jobs are launched from.</p><p>GridGRAMM has been designed to be able to be installed in any   host, independent of whether it is an UI or not. Thus, to be able to   submit jobs to the Grid, the server hosting GridGRAMM must connect to   a Grid UI host to do the work.</p><p>This routine opens a connection to a Grid UI host using a predefined   username (i.e. all jobs will be run under said username). To allow the   caller to communicate with the remote end, it creates two pipes, one for   input and one for output, and redirect error messages to a file.</p><p>These pipes lead to a child process that actually manages the   communication. Using a child process has several advantages: it simplifies   the communication process by offloading the comm. logic to a separate,   convenience tool, and by being able to use SSH as the child, we can increase   security taking advantage of its encryption capabilities.</p><p>The panorama therefore will look like this:</p><p>HTML front-end --&gt; processor.php &lt;--&gt; SSH &lt;--&gt; remote host &lt;--&gt; Grid</p>		
		<h4>Parameters</h4>
		<ul>
					<li>
			<span class="type">server</span>
			<b>$server</b> 
			- 
			A username@remove.grid.ui.host pair to use a command              processor</li>
					<li>
			<span class="type">grid_path</span>
			<b>$grid_path</b> 
			- 
			Path to working directory in the local machine</li>
					<li>
			<span class="type">process</span>
			<b>$process</b> 
			- 
			A handle to the child process that manages communication              with the Grid access point</li>
					<li>
			<span class="type">descriptorspec</span>
			<b>$descriptorspec</b> 
			- 
			</li>
					<li>
			<span class="type">pipes</span>
			<b>$pipes</b> 
			- 
			An array of file descriptors to be used to communicate              withe the Grid UI through the child process.</li>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionshow_structure"></a>
	<h3>show_structure</h3>
	<div class="indent">
		<code>void show_structure(
mixed $message, mixed $file)</code>
		<p class="linenumber">[line 435]</p>
				
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionunpack_results"></a>
	<h3>unpack_results</h3>
	<div class="indent">
		<code>void unpack_results(
)</code>
		<p class="linenumber">[line 406]</p>
		<p align="center"><strong>Extract results gathered from the Grid
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="functionupload_user_data"></a>
	<h3>upload_user_data</h3>
	<div class="indent">
		<code>void upload_user_data(
mixed $grid_path, mixed $random_value)</code>
		<p class="linenumber">[line 263]</p>
		<p align="center"><strong>Upload user data
</strong></p>
		
		<h4>Parameters</h4>
		<ul>
				</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
</div>
	<div id="credit">
		<hr>
		Documentation generated on Tue, 24 May 2005 12:14:28 +0200 by <a href="http://www.phpdoc.org">phpDocumentor 1.2.3</a>
	</div>
</div>
</body>
</html>