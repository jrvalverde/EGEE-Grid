<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>egTinker: analyze.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>analyze.php</h1><a href="analyze_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 &lt;?php
00002 
00003 <span class="keyword">class </span>Analyze <span class="keyword">extends</span> <a class="code" href="classTinkerApp.html">TinkerApp</a> {
00004 
00005 <span class="comment">// Who we are</span>
00006 
00007 var $app_name       =<span class="stringliteral">"analyze"</span>;
00008 
00009 <span class="comment">// Generate names for all files we'll use</span>
00010 
00011 var $fn=<span class="stringliteral">"tinker"</span>;           <span class="comment">// base name for all generated files</span>
00012 
00013 var $inuri          =<span class="stringliteral">"$httptmp/$dir/$fn.inp"</span>;   <span class="comment">// name relative to DocumentRoot</span>
00014 var $infile         =<span class="stringliteral">"$serverpath/$inuri"</span>;      <span class="comment">// absolute file name</span>
00015 
00016 var $brkuri         = <span class="stringliteral">"$httptmp/$dir/$fn.brk"</span>;
00017 var $brkfile        = <span class="stringliteral">"$serverpath/$brkuri"</span>;
00018 
00019 var $xyzuri         = <span class="stringliteral">"$httptmp/$dir/$fn.xyz"</span>;
00020 var $xyzfile        = <span class="stringliteral">"$serverpath/$xyzuri"</span>;
00021 
00022 var $loguri         = <span class="stringliteral">"$httptmp/$dir/$fn.log"</span>;
00023 var $logfile        = <span class="stringliteral">"$serverpath/$loguri"</span>;
00024 
00025 var $resuri         = <span class="stringliteral">"$httptmp/$dir/$fn.xyz_2"</span>;
00026 var $resfile        = <span class="stringliteral">"$serverpath/$resuri"</span>;
00027 
00028 var $pdburi         = <span class="stringliteral">"$httptmp/$dir/$fn.pdb"</span>;
00029 var $pdbfile        = <span class="stringliteral">"$serverpath/$pdburi"</span>;
00030 
00031 var $sequri         = <span class="stringliteral">"$httptmp/$dir/$fn.seq"</span>;
00032 var $seqfile        = <span class="stringliteral">"$serverpath/$sequri"</span>;
00033 
00034 <span class="comment">// options we need to receive from user form</span>
00035 
00036 var $input_file;        <span class="comment">// uploaded a local file</span>
00037 var $input_data;        <span class="comment">// filled in data text box</span>
00038 var $iformatopts;
00039 var $force_field;
00040 var $energy;
00041 var $eatom;
00042 var $elarge;
00043 var $details;
00044 var $inertia;
00045 var $moment;
00046 var $ffpar;
00047 var $email;
00048 var $wapmail;
00049 var $job;
00050 var $key;
00051 
00052 function upload_user_data($workdir)
00053 {
00054     $this-&gt;input_file  = $_FILES['upload']['tmp_name'][0];
00055     $file_name = $_FILES['upload']['name'][0];
00056     $file_size = $_FILES['upload']['size'][0];
00057     
00058 
00059     $this-&gt;iformatopts = $_POST[<span class="stringliteral">"informat"</span>];
00060     $this-&gt;force_field = $_POST[<span class="stringliteral">"forcefield"</span>];
00061     $this-&gt;energy      = $_POST[<span class="stringliteral">"energy"</span>];
00062     $this-&gt;eatom       = $_POST[<span class="stringliteral">"eatom"</span>];
00063     $this-&gt;elarge      = $_POST[<span class="stringliteral">"elarge"</span>];
00064     $this-&gt;details     = $_POST[<span class="stringliteral">"details"</span>];
00065     $this-&gt;inertia     = $_POST[<span class="stringliteral">"inertia"</span>];
00066     $this-&gt;moment      = $_POST[<span class="stringliteral">"moment"</span>];
00067     $this-&gt;ffpar       = $_POST[<span class="stringliteral">"ffpar"</span>];
00068     $this-&gt;email       = $_POST[<span class="stringliteral">"email"</span>];
00069     $this-&gt;wapmail       = $_POST[<span class="stringliteral">"wapmail"</span>];
00070     $this-&gt;job         = $_POST[<span class="stringliteral">"job"</span>];
00071     
00072     <span class="comment">// Check if the file uploaded is correct  </span>
00073     <span class="keywordflow">if</span> ($_FILES['upload']['tmp_name'][0]==<span class="stringliteral">"none"</span> || $_FILES['upload']['tmp_name'][0]==<span class="stringliteral">""</span>)
00074         haveinput=0;
00075     <span class="keywordflow">if</span> ($_FILES['upload']['size'][0]==0)
00076         haveinput=0;
00077 
00078     <span class="comment">// if haveinput == 0 check whether there is data in the text box    </span>
00079 
00080     <span class="comment">// move file to destination working directory.</span>
00081     <span class="keywordflow">if</span> (!move_file($this-&gt;input_file, $infile))
00082     {
00083         echo <span class="stringliteral">"&lt;h1&gt;$this-&gt;input_file and $infile problem: can not move&lt;/H1&gt;"</span>;
00084         <a class="code" href="test_2ssh__test_8php.html#a3">exit</a>();
00085     }
00086 
00087 
00088     <span class="comment">// check_mail_address($this-&gt;email);</span>
00089     <span class="keywordflow">if</span> ($this-&gt;email == <span class="stringliteral">""</span>) {
00090         badaddress();   <span class="comment">// in functions.php</span>
00091         <a class="code" href="test_2ssh__test_8php.html#a3">exit</a>();
00092     }
00093     <span class="comment">// test correct email</span>
00094     <span class="comment">// verify it is of the form .*@.*\..*</span>
00095     ...
00096     $remotehost = $this-&gt;email minus .*@
00097     <span class="keywordflow">if</span> (gethostbyname($remotehost)) {
00098         badaddress();
00099         <a class="code" href="test_2ssh__test_8php.html#a3">exit</a>();
00100     }
00101     
00102     <span class="keywordflow">if</span> ($this-&gt;wapmail != <span class="stringliteral">""</span>) {
00103         check_mail_address($this-&gt;wapmail);
00104     }
00105 }
00106 
00107 function print_options()
00108 {
00109 }
00110 
00111 function <a class="code" href="functions_8php.html#a1">go_to_work</a>()
00112 {
00113 }
00114 
00115 function run_application()
00116 {
00117 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Apr 21 15:51:36 2005 for egTinker by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
