<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>egTinker: ssh_test.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>ssh_test.php</h1><a href="ssh__test_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 &lt;?php
00002 
00003 <span class="comment">// run with ssh -x -T localhost php ssh_test.php</span>
00004 
<a name="l00005"></a><a class="code" href="ssh__test_8php.html#a0">00005</a> <a class="code" href="config_8php.html#a21">$debug</a> = TRUE;
00006 
00007 require 'ssh.php';
00008 
<a name="l00009"></a><a class="code" href="ssh__test_8php.html#a1">00009</a> <a class="code" href="ssh__test_8php.html#a1">$rem</a> = <span class="keyword">new</span> <a class="code" href="classSExec.html">SExec</a>;
00010 
00011 <span class="keywordflow">if</span> (isset($debug_passthru))
00012     <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_passthru(<span class="stringliteral">"jruser@cnb.uam.es"</span>, <span class="stringliteral">"kndlaria"</span>, <span class="stringliteral">"ls"</span>);
00013 
00014 <span class="keywordflow">if</span> (isset($debug_exec)) {
00015     <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_exec(<span class="stringliteral">"jruser@cnb.uam.es"</span>, <span class="stringliteral">"kndlaria"</span>, <span class="stringliteral">"ls"</span>, $out);
00016     print_r($out);
00017     foreach ($out as $line)
00018         echo $line . <span class="stringliteral">"\n"</span>;
00019 }
00020 
00021 <span class="keywordflow">if</span> (isset($debug_copy))
00022     <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_copy(<span class="stringliteral">"/data/www/EMBnet/cgi-src/Grid/egTinker/src/SSH"</span>, <span class="stringliteral">"jr@cnb.uam.es:."</span>, <span class="stringliteral">"1/1K way"</span>);
00023 
00024 <span class="keywordflow">if</span> (isset($debug_persistent))
00025 {
00026     <span class="keywordflow">if</span> (isset($debug_shell))
00027         <a class="code" href="test_2ssh__test_8php.html#a2">$p</a> = <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_open_shell(<span class="stringliteral">"jruser@cnb.uam.es"</span>, <span class="stringliteral">"kndlaria"</span>);
00028     <span class="keywordflow">else</span> {
00029         <a class="code" href="test_2ssh__test_8php.html#a2">$p</a> = <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_open_command(<span class="stringliteral">"jruser@cnb.uam.es"</span>, <span class="stringliteral">"kndlaria"</span>, <span class="stringliteral">"ls"</span>);
00030     }
00031     echo <span class="stringliteral">"after open I got this\n"</span>;
00032     print_r($p);
00033 
00034 <span class="preprocessor">    #echo "sending touch beenhere\n";</span>
00035 <span class="preprocessor"></span><span class="preprocessor">    #fwrite($p['std_in'], "touch beenhere\n");</span>
00036 <span class="preprocessor"></span>
00037         echo <span class="stringliteral">"flushing pipes\nstdout\n"</span>;
00038         rewind($p[<span class="stringliteral">"std_out"</span>]);
00039         <span class="keywordflow">do</span> {
00040             $line = fgets($p[<span class="stringliteral">"std_out"</span>], 1024);
00041             echo <span class="stringliteral">"&gt; "</span>.$line.<span class="stringliteral">"\n"</span>;
00042         } <span class="keywordflow">while</span> (! feof($p[<span class="stringliteral">"std_out"</span>]) );;
00043 <span class="preprocessor">    #    echo "stderr\n";</span>
00044 <span class="preprocessor"></span><span class="preprocessor">    #    do {</span>
00045 <span class="preprocessor"></span><span class="preprocessor">    #   $line = fgets($p["std_err"], 1024);</span>
00046 <span class="preprocessor"></span><span class="preprocessor">    #   echo "&gt;&gt; ".$line."\n";</span>
00047 <span class="preprocessor"></span><span class="preprocessor">    #    } while (! feof($p['std_err']) &amp;&amp; (strlen($line) != 0));;</span>
00048 <span class="preprocessor"></span>
00049 
00050     <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_close($p);
00051 }
00052 
<a name="l00053"></a><a class="code" href="ssh__test_8php.html#a2">00053</a> <a class="code" href="ssh__test_8php.html#a2">$cout</a> = <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_popen(<span class="stringliteral">"jruser@cnb.uam.es"</span>, <span class="stringliteral">"kndlaria"</span>, <span class="stringliteral">"ls -C"</span>, <span class="stringliteral">"r"</span>);
00054 echo fread($cout, 8192);
00055 <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_pclose($cout);
00056 echo <span class="stringliteral">"\n"</span>;
<a name="l00057"></a><a class="code" href="ssh__test_8php.html#a3">00057</a> <a class="code" href="ssh__test_8php.html#a3">$cin</a> = <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_popen(<span class="stringliteral">"jruser@cnb.uam.es"</span>, <span class="stringliteral">"kndlaria"</span>, <span class="stringliteral">"/usr/sbin/Mail -s test jr"</span>, <span class="stringliteral">"w"</span>);
00058    fputs($cin, <span class="stringliteral">"\nTest"</span>);
00059    fputs($cin, <span class="stringliteral">".\n"</span>);
00060 <a class="code" href="ssh__test_8php.html#a1">$rem</a>-&gt;ssh_pclose($cin);
00061 
<a name="l00062"></a><a class="code" href="ssh__test_8php.html#a4">00062</a> <a class="code" href="results_8php.html#a1">exit</a>;
00063 
00064 ?&gt;
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Apr 21 15:51:36 2005 for egTinker by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
